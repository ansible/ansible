


<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    
    <meta http-equiv="X-UA-Compatible" content="IE=emulateIE7" />
    <title>Coverage for lib/ansible/plugins/cliconf/icx.py: 70%</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="jquery.hotkeys.js"></script>
    <script type="text/javascript" src="jquery.isonscreen.js"></script>
    <script type="text/javascript" src="coverage_html.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(coverage.pyfile_ready);
    </script>
</head>
<body class="pyfile">

<div id="header">
    <div class="content">
        <h1>Coverage for <b>lib/ansible/plugins/cliconf/icx.py</b> :
            <span class="pc_cov">70%</span>
        </h1>

        <img id="keyboard_icon" src="keybd_closed.png" alt="Show keyboard shortcuts" />

        <h2 class="stats">
            172 statements &nbsp;
            <span class="run hide_run shortkey_r button_toggle_run">134 run</span>
            <span class="mis shortkey_m button_toggle_mis">38 missing</span>
            <span class="exc shortkey_x button_toggle_exc">0 excluded</span>

            
                <span class="par run hide_run shortkey_p button_toggle_par">22 partial</span>
            
        </h2>
    </div>
</div>

<div class="help_panel">
    <img id="panel_icon" src="keybd_open.png" alt="Hide keyboard shortcuts" />
    <p class="legend">Hot-keys on this page</p>
    <div>
    <p class="keyhelp">
        <span class="key">r</span>
        <span class="key">m</span>
        <span class="key">x</span>
        <span class="key">p</span> &nbsp; toggle line displays
    </p>
    <p class="keyhelp">
        <span class="key">j</span>
        <span class="key">k</span> &nbsp; next/prev highlighted chunk
    </p>
    <p class="keyhelp">
        <span class="key">0</span> &nbsp; (zero) top of page
    </p>
    <p class="keyhelp">
        <span class="key">1</span> &nbsp; (one) first highlighted chunk
    </p>
    </div>
</div>

<div id="source">
    <table>
        <tr>
            <td class="linenos">
<p id="n1" class="pln"><a href="#n1">1</a></p>
<p id="n2" class="pln"><a href="#n2">2</a></p>
<p id="n3" class="pln"><a href="#n3">3</a></p>
<p id="n4" class="pln"><a href="#n4">4</a></p>
<p id="n5" class="pln"><a href="#n5">5</a></p>
<p id="n6" class="pln"><a href="#n6">6</a></p>
<p id="n7" class="pln"><a href="#n7">7</a></p>
<p id="n8" class="pln"><a href="#n8">8</a></p>
<p id="n9" class="pln"><a href="#n9">9</a></p>
<p id="n10" class="pln"><a href="#n10">10</a></p>
<p id="n11" class="pln"><a href="#n11">11</a></p>
<p id="n12" class="pln"><a href="#n12">12</a></p>
<p id="n13" class="pln"><a href="#n13">13</a></p>
<p id="n14" class="pln"><a href="#n14">14</a></p>
<p id="n15" class="pln"><a href="#n15">15</a></p>
<p id="n16" class="pln"><a href="#n16">16</a></p>
<p id="n17" class="pln"><a href="#n17">17</a></p>
<p id="n18" class="pln"><a href="#n18">18</a></p>
<p id="n19" class="stm run hide_run"><a href="#n19">19</a></p>
<p id="n20" class="stm run hide_run"><a href="#n20">20</a></p>
<p id="n21" class="pln"><a href="#n21">21</a></p>
<p id="n22" class="stm run hide_run"><a href="#n22">22</a></p>
<p id="n23" class="stm run hide_run"><a href="#n23">23</a></p>
<p id="n24" class="stm run hide_run"><a href="#n24">24</a></p>
<p id="n25" class="stm run hide_run"><a href="#n25">25</a></p>
<p id="n26" class="stm run hide_run"><a href="#n26">26</a></p>
<p id="n27" class="pln"><a href="#n27">27</a></p>
<p id="n28" class="stm run hide_run"><a href="#n28">28</a></p>
<p id="n29" class="pln"><a href="#n29">29</a></p>
<p id="n30" class="stm run hide_run"><a href="#n30">30</a></p>
<p id="n31" class="stm run hide_run"><a href="#n31">31</a></p>
<p id="n32" class="stm run hide_run"><a href="#n32">32</a></p>
<p id="n33" class="stm run hide_run"><a href="#n33">33</a></p>
<p id="n34" class="stm run hide_run"><a href="#n34">34</a></p>
<p id="n35" class="stm run hide_run"><a href="#n35">35</a></p>
<p id="n36" class="pln"><a href="#n36">36</a></p>
<p id="n37" class="pln"><a href="#n37">37</a></p>
<p id="n38" class="stm run hide_run"><a href="#n38">38</a></p>
<p id="n39" class="pln"><a href="#n39">39</a></p>
<p id="n40" class="stm run hide_run"><a href="#n40">40</a></p>
<p id="n41" class="stm run hide_run"><a href="#n41">41</a></p>
<p id="n42" class="stm par run hide_run"><a href="#n42">42</a></p>
<p id="n43" class="stm mis"><a href="#n43">43</a></p>
<p id="n44" class="pln"><a href="#n44">44</a></p>
<p id="n45" class="stm par run hide_run"><a href="#n45">45</a></p>
<p id="n46" class="stm mis"><a href="#n46">46</a></p>
<p id="n47" class="pln"><a href="#n47">47</a></p>
<p id="n48" class="stm run hide_run"><a href="#n48">48</a></p>
<p id="n49" class="stm run hide_run"><a href="#n49">49</a></p>
<p id="n50" class="pln"><a href="#n50">50</a></p>
<p id="n51" class="stm run hide_run"><a href="#n51">51</a></p>
<p id="n52" class="stm run hide_run"><a href="#n52">52</a></p>
<p id="n53" class="pln"><a href="#n53">53</a></p>
<p id="n54" class="stm par run hide_run"><a href="#n54">54</a></p>
<p id="n55" class="stm run hide_run"><a href="#n55">55</a></p>
<p id="n56" class="pln"><a href="#n56">56</a></p>
<p id="n57" class="stm mis"><a href="#n57">57</a></p>
<p id="n58" class="pln"><a href="#n58">58</a></p>
<p id="n59" class="stm run hide_run"><a href="#n59">59</a></p>
<p id="n60" class="stm run hide_run"><a href="#n60">60</a></p>
<p id="n61" class="pln"><a href="#n61">61</a></p>
<p id="n62" class="stm run hide_run"><a href="#n62">62</a></p>
<p id="n63" class="pln"><a href="#n63">63</a></p>
<p id="n64" class="stm run hide_run"><a href="#n64">64</a></p>
<p id="n65" class="stm run hide_run"><a href="#n65">65</a></p>
<p id="n66" class="stm run hide_run"><a href="#n66">66</a></p>
<p id="n67" class="stm par run hide_run"><a href="#n67">67</a></p>
<p id="n68" class="stm par run hide_run"><a href="#n68">68</a></p>
<p id="n69" class="stm mis"><a href="#n69">69</a></p>
<p id="n70" class="pln"><a href="#n70">70</a></p>
<p id="n71" class="stm mis"><a href="#n71">71</a></p>
<p id="n72" class="pln"><a href="#n72">72</a></p>
<p id="n73" class="stm run hide_run"><a href="#n73">73</a></p>
<p id="n74" class="stm run hide_run"><a href="#n74">74</a></p>
<p id="n75" class="pln"><a href="#n75">75</a></p>
<p id="n76" class="stm run hide_run"><a href="#n76">76</a></p>
<p id="n77" class="pln"><a href="#n77">77</a></p>
<p id="n78" class="pln"><a href="#n78">78</a></p>
<p id="n79" class="pln"><a href="#n79">79</a></p>
<p id="n80" class="pln"><a href="#n80">80</a></p>
<p id="n81" class="pln"><a href="#n81">81</a></p>
<p id="n82" class="pln"><a href="#n82">82</a></p>
<p id="n83" class="pln"><a href="#n83">83</a></p>
<p id="n84" class="pln"><a href="#n84">84</a></p>
<p id="n85" class="pln"><a href="#n85">85</a></p>
<p id="n86" class="pln"><a href="#n86">86</a></p>
<p id="n87" class="pln"><a href="#n87">87</a></p>
<p id="n88" class="pln"><a href="#n88">88</a></p>
<p id="n89" class="pln"><a href="#n89">89</a></p>
<p id="n90" class="pln"><a href="#n90">90</a></p>
<p id="n91" class="pln"><a href="#n91">91</a></p>
<p id="n92" class="pln"><a href="#n92">92</a></p>
<p id="n93" class="pln"><a href="#n93">93</a></p>
<p id="n94" class="pln"><a href="#n94">94</a></p>
<p id="n95" class="pln"><a href="#n95">95</a></p>
<p id="n96" class="pln"><a href="#n96">96</a></p>
<p id="n97" class="pln"><a href="#n97">97</a></p>
<p id="n98" class="pln"><a href="#n98">98</a></p>
<p id="n99" class="pln"><a href="#n99">99</a></p>
<p id="n100" class="pln"><a href="#n100">100</a></p>
<p id="n101" class="pln"><a href="#n101">101</a></p>
<p id="n102" class="pln"><a href="#n102">102</a></p>
<p id="n103" class="pln"><a href="#n103">103</a></p>
<p id="n104" class="pln"><a href="#n104">104</a></p>
<p id="n105" class="pln"><a href="#n105">105</a></p>
<p id="n106" class="pln"><a href="#n106">106</a></p>
<p id="n107" class="pln"><a href="#n107">107</a></p>
<p id="n108" class="pln"><a href="#n108">108</a></p>
<p id="n109" class="pln"><a href="#n109">109</a></p>
<p id="n110" class="pln"><a href="#n110">110</a></p>
<p id="n111" class="stm run hide_run"><a href="#n111">111</a></p>
<p id="n112" class="stm run hide_run"><a href="#n112">112</a></p>
<p id="n113" class="stm run hide_run"><a href="#n113">113</a></p>
<p id="n114" class="pln"><a href="#n114">114</a></p>
<p id="n115" class="stm par run hide_run"><a href="#n115">115</a></p>
<p id="n116" class="stm run hide_run"><a href="#n116">116</a></p>
<p id="n117" class="pln"><a href="#n117">117</a></p>
<p id="n118" class="stm run hide_run"><a href="#n118">118</a></p>
<p id="n119" class="stm run hide_run"><a href="#n119">119</a></p>
<p id="n120" class="pln"><a href="#n120">120</a></p>
<p id="n121" class="stm par run hide_run"><a href="#n121">121</a></p>
<p id="n122" class="stm run hide_run"><a href="#n122">122</a></p>
<p id="n123" class="pln"><a href="#n123">123</a></p>
<p id="n124" class="pln"><a href="#n124">124</a></p>
<p id="n125" class="stm run hide_run"><a href="#n125">125</a></p>
<p id="n126" class="stm run hide_run"><a href="#n126">126</a></p>
<p id="n127" class="stm run hide_run"><a href="#n127">127</a></p>
<p id="n128" class="pln"><a href="#n128">128</a></p>
<p id="n129" class="pln"><a href="#n129">129</a></p>
<p id="n130" class="stm run hide_run"><a href="#n130">130</a></p>
<p id="n131" class="pln"><a href="#n131">131</a></p>
<p id="n132" class="stm run hide_run"><a href="#n132">132</a></p>
<p id="n133" class="pln"><a href="#n133">133</a></p>
<p id="n134" class="stm run hide_run"><a href="#n134">134</a></p>
<p id="n135" class="stm run hide_run"><a href="#n135">135</a></p>
<p id="n136" class="pln"><a href="#n136">136</a></p>
<p id="n137" class="pln"><a href="#n137">137</a></p>
<p id="n138" class="stm run hide_run"><a href="#n138">138</a></p>
<p id="n139" class="stm run hide_run"><a href="#n139">139</a></p>
<p id="n140" class="pln"><a href="#n140">140</a></p>
<p id="n141" class="stm run hide_run"><a href="#n141">141</a></p>
<p id="n142" class="pln"><a href="#n142">142</a></p>
<p id="n143" class="stm run hide_run"><a href="#n143">143</a></p>
<p id="n144" class="stm run hide_run"><a href="#n144">144</a></p>
<p id="n145" class="stm run hide_run"><a href="#n145">145</a></p>
<p id="n146" class="pln"><a href="#n146">146</a></p>
<p id="n147" class="stm run hide_run"><a href="#n147">147</a></p>
<p id="n148" class="stm run hide_run"><a href="#n148">148</a></p>
<p id="n149" class="stm run hide_run"><a href="#n149">149</a></p>
<p id="n150" class="stm run hide_run"><a href="#n150">150</a></p>
<p id="n151" class="stm run hide_run"><a href="#n151">151</a></p>
<p id="n152" class="pln"><a href="#n152">152</a></p>
<p id="n153" class="stm run hide_run"><a href="#n153">153</a></p>
<p id="n154" class="stm run hide_run"><a href="#n154">154</a></p>
<p id="n155" class="stm par run hide_run"><a href="#n155">155</a></p>
<p id="n156" class="stm run hide_run"><a href="#n156">156</a></p>
<p id="n157" class="stm run hide_run"><a href="#n157">157</a></p>
<p id="n158" class="stm run hide_run"><a href="#n158">158</a></p>
<p id="n159" class="pln"><a href="#n159">159</a></p>
<p id="n160" class="stm run hide_run"><a href="#n160">160</a></p>
<p id="n161" class="pln"><a href="#n161">161</a></p>
<p id="n162" class="stm run hide_run"><a href="#n162">162</a></p>
<p id="n163" class="stm par run hide_run"><a href="#n163">163</a></p>
<p id="n164" class="stm run hide_run"><a href="#n164">164</a></p>
<p id="n165" class="pln"><a href="#n165">165</a></p>
<p id="n166" class="stm run hide_run"><a href="#n166">166</a></p>
<p id="n167" class="stm par run hide_run"><a href="#n167">167</a></p>
<p id="n168" class="stm run hide_run"><a href="#n168">168</a></p>
<p id="n169" class="stm run hide_run"><a href="#n169">169</a></p>
<p id="n170" class="pln"><a href="#n170">170</a></p>
<p id="n171" class="stm run hide_run"><a href="#n171">171</a></p>
<p id="n172" class="pln"><a href="#n172">172</a></p>
<p id="n173" class="stm mis"><a href="#n173">173</a></p>
<p id="n174" class="pln"><a href="#n174">174</a></p>
<p id="n175" class="stm run hide_run"><a href="#n175">175</a></p>
<p id="n176" class="stm run hide_run"><a href="#n176">176</a></p>
<p id="n177" class="stm run hide_run"><a href="#n177">177</a></p>
<p id="n178" class="pln"><a href="#n178">178</a></p>
<p id="n179" class="pln"><a href="#n179">179</a></p>
<p id="n180" class="pln"><a href="#n180">180</a></p>
<p id="n181" class="pln"><a href="#n181">181</a></p>
<p id="n182" class="pln"><a href="#n182">182</a></p>
<p id="n183" class="pln"><a href="#n183">183</a></p>
<p id="n184" class="pln"><a href="#n184">184</a></p>
<p id="n185" class="pln"><a href="#n185">185</a></p>
<p id="n186" class="pln"><a href="#n186">186</a></p>
<p id="n187" class="pln"><a href="#n187">187</a></p>
<p id="n188" class="pln"><a href="#n188">188</a></p>
<p id="n189" class="pln"><a href="#n189">189</a></p>
<p id="n190" class="pln"><a href="#n190">190</a></p>
<p id="n191" class="pln"><a href="#n191">191</a></p>
<p id="n192" class="pln"><a href="#n192">192</a></p>
<p id="n193" class="pln"><a href="#n193">193</a></p>
<p id="n194" class="pln"><a href="#n194">194</a></p>
<p id="n195" class="pln"><a href="#n195">195</a></p>
<p id="n196" class="pln"><a href="#n196">196</a></p>
<p id="n197" class="pln"><a href="#n197">197</a></p>
<p id="n198" class="pln"><a href="#n198">198</a></p>
<p id="n199" class="pln"><a href="#n199">199</a></p>
<p id="n200" class="pln"><a href="#n200">200</a></p>
<p id="n201" class="pln"><a href="#n201">201</a></p>
<p id="n202" class="pln"><a href="#n202">202</a></p>
<p id="n203" class="pln"><a href="#n203">203</a></p>
<p id="n204" class="pln"><a href="#n204">204</a></p>
<p id="n205" class="pln"><a href="#n205">205</a></p>
<p id="n206" class="pln"><a href="#n206">206</a></p>
<p id="n207" class="pln"><a href="#n207">207</a></p>
<p id="n208" class="pln"><a href="#n208">208</a></p>
<p id="n209" class="pln"><a href="#n209">209</a></p>
<p id="n210" class="pln"><a href="#n210">210</a></p>
<p id="n211" class="pln"><a href="#n211">211</a></p>
<p id="n212" class="pln"><a href="#n212">212</a></p>
<p id="n213" class="pln"><a href="#n213">213</a></p>
<p id="n214" class="pln"><a href="#n214">214</a></p>
<p id="n215" class="pln"><a href="#n215">215</a></p>
<p id="n216" class="pln"><a href="#n216">216</a></p>
<p id="n217" class="pln"><a href="#n217">217</a></p>
<p id="n218" class="pln"><a href="#n218">218</a></p>
<p id="n219" class="pln"><a href="#n219">219</a></p>
<p id="n220" class="pln"><a href="#n220">220</a></p>
<p id="n221" class="pln"><a href="#n221">221</a></p>
<p id="n222" class="pln"><a href="#n222">222</a></p>
<p id="n223" class="pln"><a href="#n223">223</a></p>
<p id="n224" class="pln"><a href="#n224">224</a></p>
<p id="n225" class="pln"><a href="#n225">225</a></p>
<p id="n226" class="pln"><a href="#n226">226</a></p>
<p id="n227" class="pln"><a href="#n227">227</a></p>
<p id="n228" class="pln"><a href="#n228">228</a></p>
<p id="n229" class="pln"><a href="#n229">229</a></p>
<p id="n230" class="pln"><a href="#n230">230</a></p>
<p id="n231" class="pln"><a href="#n231">231</a></p>
<p id="n232" class="stm run hide_run"><a href="#n232">232</a></p>
<p id="n233" class="stm mis"><a href="#n233">233</a></p>
<p id="n234" class="stm run hide_run"><a href="#n234">234</a></p>
<p id="n235" class="stm par run hide_run"><a href="#n235">235</a></p>
<p id="n236" class="stm mis"><a href="#n236">236</a></p>
<p id="n237" class="pln"><a href="#n237">237</a></p>
<p id="n238" class="stm run hide_run"><a href="#n238">238</a></p>
<p id="n239" class="pln"><a href="#n239">239</a></p>
<p id="n240" class="stm run hide_run"><a href="#n240">240</a></p>
<p id="n241" class="stm par run hide_run"><a href="#n241">241</a></p>
<p id="n242" class="stm run hide_run"><a href="#n242">242</a></p>
<p id="n243" class="stm mis"><a href="#n243">243</a></p>
<p id="n244" class="stm mis"><a href="#n244">244</a></p>
<p id="n245" class="stm mis"><a href="#n245">245</a></p>
<p id="n246" class="pln"><a href="#n246">246</a></p>
<p id="n247" class="stm mis"><a href="#n247">247</a></p>
<p id="n248" class="stm mis"><a href="#n248">248</a></p>
<p id="n249" class="pln"><a href="#n249">249</a></p>
<p id="n250" class="pln"><a href="#n250">250</a></p>
<p id="n251" class="pln"><a href="#n251">251</a></p>
<p id="n252" class="pln"><a href="#n252">252</a></p>
<p id="n253" class="pln"><a href="#n253">253</a></p>
<p id="n254" class="pln"><a href="#n254">254</a></p>
<p id="n255" class="pln"><a href="#n255">255</a></p>
<p id="n256" class="pln"><a href="#n256">256</a></p>
<p id="n257" class="pln"><a href="#n257">257</a></p>
<p id="n258" class="pln"><a href="#n258">258</a></p>
<p id="n259" class="pln"><a href="#n259">259</a></p>
<p id="n260" class="pln"><a href="#n260">260</a></p>
<p id="n261" class="pln"><a href="#n261">261</a></p>
<p id="n262" class="pln"><a href="#n262">262</a></p>
<p id="n263" class="pln"><a href="#n263">263</a></p>
<p id="n264" class="pln"><a href="#n264">264</a></p>
<p id="n265" class="pln"><a href="#n265">265</a></p>
<p id="n266" class="pln"><a href="#n266">266</a></p>
<p id="n267" class="pln"><a href="#n267">267</a></p>
<p id="n268" class="pln"><a href="#n268">268</a></p>
<p id="n269" class="pln"><a href="#n269">269</a></p>
<p id="n270" class="pln"><a href="#n270">270</a></p>
<p id="n271" class="stm run hide_run"><a href="#n271">271</a></p>
<p id="n272" class="stm run hide_run"><a href="#n272">272</a></p>
<p id="n273" class="pln"><a href="#n273">273</a></p>
<p id="n274" class="pln"><a href="#n274">274</a></p>
<p id="n275" class="pln"><a href="#n275">275</a></p>
<p id="n276" class="pln"><a href="#n276">276</a></p>
<p id="n277" class="pln"><a href="#n277">277</a></p>
<p id="n278" class="pln"><a href="#n278">278</a></p>
<p id="n279" class="pln"><a href="#n279">279</a></p>
<p id="n280" class="pln"><a href="#n280">280</a></p>
<p id="n281" class="pln"><a href="#n281">281</a></p>
<p id="n282" class="pln"><a href="#n282">282</a></p>
<p id="n283" class="pln"><a href="#n283">283</a></p>
<p id="n284" class="pln"><a href="#n284">284</a></p>
<p id="n285" class="pln"><a href="#n285">285</a></p>
<p id="n286" class="stm run hide_run"><a href="#n286">286</a></p>
<p id="n287" class="stm run hide_run"><a href="#n287">287</a></p>
<p id="n288" class="pln"><a href="#n288">288</a></p>
<p id="n289" class="pln"><a href="#n289">289</a></p>
<p id="n290" class="pln"><a href="#n290">290</a></p>
<p id="n291" class="pln"><a href="#n291">291</a></p>
<p id="n292" class="pln"><a href="#n292">292</a></p>
<p id="n293" class="pln"><a href="#n293">293</a></p>
<p id="n294" class="stm run hide_run"><a href="#n294">294</a></p>
<p id="n295" class="stm run hide_run"><a href="#n295">295</a></p>
<p id="n296" class="stm mis"><a href="#n296">296</a></p>
<p id="n297" class="stm mis"><a href="#n297">297</a></p>
<p id="n298" class="pln"><a href="#n298">298</a></p>
<p id="n299" class="stm mis"><a href="#n299">299</a></p>
<p id="n300" class="stm mis"><a href="#n300">300</a></p>
<p id="n301" class="stm mis"><a href="#n301">301</a></p>
<p id="n302" class="pln"><a href="#n302">302</a></p>
<p id="n303" class="stm run hide_run"><a href="#n303">303</a></p>
<p id="n304" class="pln"><a href="#n304">304</a></p>
<p id="n305" class="pln"><a href="#n305">305</a></p>
<p id="n306" class="pln"><a href="#n306">306</a></p>
<p id="n307" class="pln"><a href="#n307">307</a></p>
<p id="n308" class="pln"><a href="#n308">308</a></p>
<p id="n309" class="pln"><a href="#n309">309</a></p>
<p id="n310" class="pln"><a href="#n310">310</a></p>
<p id="n311" class="pln"><a href="#n311">311</a></p>
<p id="n312" class="pln"><a href="#n312">312</a></p>
<p id="n313" class="pln"><a href="#n313">313</a></p>
<p id="n314" class="pln"><a href="#n314">314</a></p>
<p id="n315" class="stm mis"><a href="#n315">315</a></p>
<p id="n316" class="stm mis"><a href="#n316">316</a></p>
<p id="n317" class="stm mis"><a href="#n317">317</a></p>
<p id="n318" class="stm mis"><a href="#n318">318</a></p>
<p id="n319" class="stm mis"><a href="#n319">319</a></p>
<p id="n320" class="stm mis"><a href="#n320">320</a></p>
<p id="n321" class="stm mis"><a href="#n321">321</a></p>
<p id="n322" class="stm mis"><a href="#n322">322</a></p>
<p id="n323" class="stm mis"><a href="#n323">323</a></p>
<p id="n324" class="stm mis"><a href="#n324">324</a></p>
<p id="n325" class="stm mis"><a href="#n325">325</a></p>
<p id="n326" class="stm mis"><a href="#n326">326</a></p>
<p id="n327" class="pln"><a href="#n327">327</a></p>
<p id="n328" class="stm mis"><a href="#n328">328</a></p>
<p id="n329" class="stm run hide_run"><a href="#n329">329</a></p>
<p id="n330" class="stm run hide_run"><a href="#n330">330</a></p>
<p id="n331" class="stm mis"><a href="#n331">331</a></p>
<p id="n332" class="pln"><a href="#n332">332</a></p>
<p id="n333" class="stm run hide_run"><a href="#n333">333</a></p>
<p id="n334" class="stm run hide_run"><a href="#n334">334</a></p>
<p id="n335" class="pln"><a href="#n335">335</a></p>
<p id="n336" class="stm run hide_run"><a href="#n336">336</a></p>
<p id="n337" class="pln"><a href="#n337">337</a></p>
<p id="n338" class="stm run hide_run"><a href="#n338">338</a></p>
<p id="n339" class="stm par run hide_run"><a href="#n339">339</a></p>
<p id="n340" class="stm mis"><a href="#n340">340</a></p>
<p id="n341" class="pln"><a href="#n341">341</a></p>
<p id="n342" class="stm run hide_run"><a href="#n342">342</a></p>
<p id="n343" class="stm run hide_run"><a href="#n343">343</a></p>
<p id="n344" class="stm par run hide_run"><a href="#n344">344</a></p>
<p id="n345" class="stm run hide_run"><a href="#n345">345</a></p>
<p id="n346" class="pln"><a href="#n346">346</a></p>
<p id="n347" class="stm run hide_run"><a href="#n347">347</a></p>
<p id="n348" class="stm par run hide_run"><a href="#n348">348</a></p>
<p id="n349" class="stm run hide_run"><a href="#n349">349</a></p>
<p id="n350" class="pln"><a href="#n350">350</a></p>
<p id="n351" class="stm run hide_run"><a href="#n351">351</a></p>
<p id="n352" class="stm run hide_run"><a href="#n352">352</a></p>
<p id="n353" class="stm run hide_run"><a href="#n353">353</a></p>
<p id="n354" class="stm par run hide_run"><a href="#n354">354</a></p>
<p id="n355" class="stm mis"><a href="#n355">355</a></p>
<p id="n356" class="stm mis"><a href="#n356">356</a></p>
<p id="n357" class="pln"><a href="#n357">357</a></p>
<p id="n358" class="stm run hide_run"><a href="#n358">358</a></p>
<p id="n359" class="pln"><a href="#n359">359</a></p>
<p id="n360" class="stm run hide_run"><a href="#n360">360</a></p>
<p id="n361" class="pln"><a href="#n361">361</a></p>
<p id="n362" class="pln"><a href="#n362">362</a></p>
<p id="n363" class="pln"><a href="#n363">363</a></p>
<p id="n364" class="pln"><a href="#n364">364</a></p>
<p id="n365" class="pln"><a href="#n365">365</a></p>
<p id="n366" class="pln"><a href="#n366">366</a></p>
<p id="n367" class="pln"><a href="#n367">367</a></p>
<p id="n368" class="pln"><a href="#n368">368</a></p>
<p id="n369" class="pln"><a href="#n369">369</a></p>
<p id="n370" class="pln"><a href="#n370">370</a></p>
<p id="n371" class="pln"><a href="#n371">371</a></p>
<p id="n372" class="pln"><a href="#n372">372</a></p>
<p id="n373" class="pln"><a href="#n373">373</a></p>
<p id="n374" class="pln"><a href="#n374">374</a></p>
<p id="n375" class="pln"><a href="#n375">375</a></p>
<p id="n376" class="pln"><a href="#n376">376</a></p>
<p id="n377" class="pln"><a href="#n377">377</a></p>
<p id="n378" class="pln"><a href="#n378">378</a></p>
<p id="n379" class="pln"><a href="#n379">379</a></p>
<p id="n380" class="pln"><a href="#n380">380</a></p>
<p id="n381" class="stm run hide_run"><a href="#n381">381</a></p>
<p id="n382" class="stm run hide_run"><a href="#n382">382</a></p>
<p id="n383" class="stm run hide_run"><a href="#n383">383</a></p>
<p id="n384" class="stm run hide_run"><a href="#n384">384</a></p>
<p id="n385" class="stm run hide_run"><a href="#n385">385</a></p>
<p id="n386" class="stm run hide_run"><a href="#n386">386</a></p>
<p id="n387" class="stm par run hide_run"><a href="#n387">387</a></p>
<p id="n388" class="stm run hide_run"><a href="#n388">388</a></p>
<p id="n389" class="stm run hide_run"><a href="#n389">389</a></p>
<p id="n390" class="pln"><a href="#n390">390</a></p>
<p id="n391" class="stm run hide_run"><a href="#n391">391</a></p>
<p id="n392" class="stm run hide_run"><a href="#n392">392</a></p>
<p id="n393" class="stm run hide_run"><a href="#n393">393</a></p>
<p id="n394" class="stm par run hide_run"><a href="#n394">394</a></p>
<p id="n395" class="stm mis"><a href="#n395">395</a></p>
<p id="n396" class="pln"><a href="#n396">396</a></p>
<p id="n397" class="stm run hide_run"><a href="#n397">397</a></p>
<p id="n398" class="stm run hide_run"><a href="#n398">398</a></p>
<p id="n399" class="pln"><a href="#n399">399</a></p>
<p id="n400" class="stm run hide_run"><a href="#n400">400</a></p>
<p id="n401" class="stm run hide_run"><a href="#n401">401</a></p>
<p id="n402" class="stm par run hide_run"><a href="#n402">402</a></p>
<p id="n403" class="stm mis"><a href="#n403">403</a></p>
<p id="n404" class="stm mis"><a href="#n404">404</a></p>
<p id="n405" class="stm run hide_run"><a href="#n405">405</a></p>

            </td>
            <td class="text">
<p id="t1" class="pln"><span class="com">#</span><span class="strut">&nbsp;</span></p>
<p id="t2" class="pln"><span class="com"># (c) 2017 Red Hat Inc.</span><span class="strut">&nbsp;</span></p>
<p id="t3" class="pln"><span class="com">#</span><span class="strut">&nbsp;</span></p>
<p id="t4" class="pln"><span class="com"># This file is part of Ansible</span><span class="strut">&nbsp;</span></p>
<p id="t5" class="pln"><span class="com">#</span><span class="strut">&nbsp;</span></p>
<p id="t6" class="pln"><span class="com"># Ansible is free software: you can redistribute it and/or modify</span><span class="strut">&nbsp;</span></p>
<p id="t7" class="pln"><span class="com"># it under the terms of the GNU General Public License as published by</span><span class="strut">&nbsp;</span></p>
<p id="t8" class="pln"><span class="com"># the Free Software Foundation, either version 3 of the License, or</span><span class="strut">&nbsp;</span></p>
<p id="t9" class="pln"><span class="com"># (at your option) any later version.</span><span class="strut">&nbsp;</span></p>
<p id="t10" class="pln"><span class="com">#</span><span class="strut">&nbsp;</span></p>
<p id="t11" class="pln"><span class="com"># Ansible is distributed in the hope that it will be useful,</span><span class="strut">&nbsp;</span></p>
<p id="t12" class="pln"><span class="com"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span><span class="strut">&nbsp;</span></p>
<p id="t13" class="pln"><span class="com"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span><span class="strut">&nbsp;</span></p>
<p id="t14" class="pln"><span class="com"># GNU General Public License for more details.</span><span class="strut">&nbsp;</span></p>
<p id="t15" class="pln"><span class="com">#</span><span class="strut">&nbsp;</span></p>
<p id="t16" class="pln"><span class="com"># You should have received a copy of the GNU General Public License</span><span class="strut">&nbsp;</span></p>
<p id="t17" class="pln"><span class="com"># along with Ansible.  If not, see &lt;http://www.gnu.org/licenses/>.</span><span class="strut">&nbsp;</span></p>
<p id="t18" class="pln"><span class="com">#</span><span class="strut">&nbsp;</span></p>
<p id="t19" class="stm run hide_run"><span class="key">from</span> <span class="nam">__future__</span> <span class="key">import</span> <span class="op">(</span><span class="nam">absolute_import</span><span class="op">,</span> <span class="nam">division</span><span class="op">,</span> <span class="nam">print_function</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t20" class="stm run hide_run"><span class="nam">__metaclass__</span> <span class="op">=</span> <span class="nam">type</span><span class="strut">&nbsp;</span></p>
<p id="t21" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t22" class="stm run hide_run"><span class="key">import</span> <span class="nam">collections</span><span class="strut">&nbsp;</span></p>
<p id="t23" class="stm run hide_run"><span class="key">import</span> <span class="nam">re</span><span class="strut">&nbsp;</span></p>
<p id="t24" class="stm run hide_run"><span class="key">import</span> <span class="nam">time</span><span class="strut">&nbsp;</span></p>
<p id="t25" class="stm run hide_run"><span class="key">import</span> <span class="nam">json</span><span class="strut">&nbsp;</span></p>
<p id="t26" class="stm run hide_run"><span class="key">import</span> <span class="nam">os</span><span class="strut">&nbsp;</span></p>
<p id="t27" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t28" class="stm run hide_run"><span class="key">from</span> <span class="nam">itertools</span> <span class="key">import</span> <span class="nam">chain</span><span class="strut">&nbsp;</span></p>
<p id="t29" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t30" class="stm run hide_run"><span class="key">from</span> <span class="nam">ansible</span><span class="op">.</span><span class="nam">errors</span> <span class="key">import</span> <span class="nam">AnsibleConnectionFailure</span><span class="strut">&nbsp;</span></p>
<p id="t31" class="stm run hide_run"><span class="key">from</span> <span class="nam">ansible</span><span class="op">.</span><span class="nam">module_utils</span><span class="op">.</span><span class="nam">_text</span> <span class="key">import</span> <span class="nam">to_text</span><span class="strut">&nbsp;</span></p>
<p id="t32" class="stm run hide_run"><span class="key">from</span> <span class="nam">ansible</span><span class="op">.</span><span class="nam">module_utils</span><span class="op">.</span><span class="nam">six</span> <span class="key">import</span> <span class="nam">iteritems</span><span class="strut">&nbsp;</span></p>
<p id="t33" class="stm run hide_run"><span class="key">from</span> <span class="nam">ansible</span><span class="op">.</span><span class="nam">module_utils</span><span class="op">.</span><span class="nam">network</span><span class="op">.</span><span class="nam">common</span><span class="op">.</span><span class="nam">config</span> <span class="key">import</span> <span class="nam">NetworkConfig</span><span class="op">,</span> <span class="nam">dumps</span><span class="strut">&nbsp;</span></p>
<p id="t34" class="stm run hide_run"><span class="key">from</span> <span class="nam">ansible</span><span class="op">.</span><span class="nam">module_utils</span><span class="op">.</span><span class="nam">network</span><span class="op">.</span><span class="nam">common</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">to_list</span><span class="strut">&nbsp;</span></p>
<p id="t35" class="stm run hide_run"><span class="key">from</span> <span class="nam">ansible</span><span class="op">.</span><span class="nam">plugins</span><span class="op">.</span><span class="nam">cliconf</span> <span class="key">import</span> <span class="nam">CliconfBase</span><span class="op">,</span> <span class="nam">enable_mode</span><span class="strut">&nbsp;</span></p>
<p id="t36" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t37" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t38" class="stm run hide_run"><span class="key">class</span> <span class="nam">Cliconf</span><span class="op">(</span><span class="nam">CliconfBase</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t39" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t40" class="stm run hide_run">    <span class="op">@</span><span class="nam">enable_mode</span><span class="strut">&nbsp;</span></p>
<p id="t41" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get_config</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">source</span><span class="op">=</span><span class="str">'running'</span><span class="op">,</span> <span class="nam">flags</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">format</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span><span class="nam">compare</span><span class="op">=</span><span class="nam">None</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t42" class="stm par run hide_run"><span class="annotate short">42&#x202F;&#x219B;&#x202F;43</span><span class="annotate long">line 42 didn't jump to line 43, because the condition on line 42 was never true</span>        <span class="key">if</span> <span class="nam">source</span> <span class="key">not</span> <span class="key">in</span> <span class="op">(</span><span class="str">'running'</span><span class="op">,</span> <span class="str">'startup'</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t43" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">"fetching configuration from %s is not supported"</span> <span class="op">%</span> <span class="nam">source</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t44" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t45" class="stm par run hide_run"><span class="annotate short">45&#x202F;&#x219B;&#x202F;46</span><span class="annotate long">line 45 didn't jump to line 46, because the condition on line 45 was never true</span>        <span class="key">if</span> <span class="nam">format</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t46" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">"'format' value %s is not supported for get_config"</span> <span class="op">%</span> <span class="nam">format</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t47" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t48" class="stm run hide_run">        <span class="key">if</span> <span class="key">not</span> <span class="nam">flags</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t49" class="stm run hide_run">            <span class="nam">flags</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t50" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t51" class="stm run hide_run">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">get_env_diff</span><span class="op">(</span><span class="nam">compare</span><span class="op">)</span> <span class="op">==</span> <span class="nam">False</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t52" class="stm run hide_run">            <span class="key">return</span> <span class="str">''</span><span class="strut">&nbsp;</span></p>
<p id="t53" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t54" class="stm par run hide_run"><span class="annotate short">54&#x202F;&#x219B;&#x202F;57</span><span class="annotate long">line 54 didn't jump to line 57, because the condition on line 54 was never false</span>            <span class="key">if</span> <span class="nam">source</span> <span class="op">==</span> <span class="str">'running'</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t55" class="stm run hide_run">                <span class="nam">cmd</span> <span class="op">=</span> <span class="str">'show running-config '</span><span class="strut">&nbsp;</span></p>
<p id="t56" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t57" class="stm mis">                <span class="nam">cmd</span> <span class="op">=</span> <span class="str">'show configuration '</span><span class="strut">&nbsp;</span></p>
<p id="t58" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t59" class="stm run hide_run">            <span class="nam">cmd</span> <span class="op">+=</span> <span class="str">' '</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">to_list</span><span class="op">(</span><span class="nam">flags</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t60" class="stm run hide_run">            <span class="nam">cmd</span> <span class="op">=</span> <span class="nam">cmd</span><span class="op">.</span><span class="nam">strip</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t61" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t62" class="stm run hide_run">            <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="nam">cmd</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t63" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t64" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get_env_diff</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span><span class="nam">compare</span><span class="op">=</span><span class="nam">None</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t65" class="stm run hide_run">        <span class="key">if</span> <span class="nam">compare</span> <span class="key">is</span> <span class="key">not</span> <span class="nam">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t66" class="stm run hide_run">            <span class="nam">diff</span> <span class="op">=</span> <span class="nam">compare</span><span class="strut">&nbsp;</span></p>
<p id="t67" class="stm par run hide_run"><span class="annotate short">67&#x202F;&#x219B;&#x202F;68</span><span class="annotate long">line 67 didn't jump to line 68, because the condition on line 67 was never true</span>        <span class="key">elif</span> <span class="nam">os</span><span class="op">.</span><span class="nam">environ</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">'CHECK_RUNNING_CONFIG'</span><span class="op">)</span> <span class="key">is</span> <span class="key">not</span> <span class="nam">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t68" class="stm par run hide_run"><span class="annotate short">68&#x202F;&#x219B;&#x202F;69,&nbsp;&nbsp; 68&#x202F;&#x219B;&#x202F;71</span><span class="annotate long">2 missed branches: 1) line 68 didn't jump to line 69, because the condition on line 68 was never true, 2) line 68 didn't jump to line 71, because the condition on line 68 was never false</span>            <span class="key">if</span> <span class="nam">os</span><span class="op">.</span><span class="nam">environ</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="str">'CHECK_RUNNING_CONFIG'</span><span class="op">)</span> <span class="op">==</span> <span class="str">'False'</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t69" class="stm mis">                <span class="nam">diff</span> <span class="op">=</span> <span class="nam">False</span><span class="strut">&nbsp;</span></p>
<p id="t70" class="pln">            <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t71" class="stm mis">                <span class="nam">diff</span> <span class="op">=</span> <span class="nam">True</span><span class="strut">&nbsp;</span></p>
<p id="t72" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t73" class="stm run hide_run">            <span class="nam">diff</span> <span class="op">=</span> <span class="nam">True</span><span class="strut">&nbsp;</span></p>
<p id="t74" class="stm run hide_run">        <span class="key">return</span> <span class="nam">diff</span><span class="strut">&nbsp;</span></p>
<p id="t75" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t76" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get_diff</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">candidate</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">running</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">diff_match</span><span class="op">=</span><span class="str">'line'</span><span class="op">,</span> <span class="nam">diff_ignore_lines</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">path</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">diff_replace</span><span class="op">=</span><span class="str">'line'</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t77" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t78" class="pln"><span class="str">        Generate diff between candidate and running configuration. If the</span><span class="strut">&nbsp;</span></p>
<p id="t79" class="pln"><span class="str">        remote host supports onbox diff capabilities ie. supports_onbox_diff in that case</span><span class="strut">&nbsp;</span></p>
<p id="t80" class="pln"><span class="str">        candidate and running configurations are not required to be passed as argument.</span><span class="strut">&nbsp;</span></p>
<p id="t81" class="pln"><span class="str">        In case if onbox diff capability is not supported candidate argument is mandatory</span><span class="strut">&nbsp;</span></p>
<p id="t82" class="pln"><span class="str">        and running argument is optional.</span><span class="strut">&nbsp;</span></p>
<p id="t83" class="pln"><span class="str">        :param candidate: The configuration which is expected to be present on remote host.</span><span class="strut">&nbsp;</span></p>
<p id="t84" class="pln"><span class="str">        :param running: The base configuration which is used to generate diff.</span><span class="strut">&nbsp;</span></p>
<p id="t85" class="pln"><span class="str">        :param diff_match: Instructs how to match the candidate configuration with current device configuration</span><span class="strut">&nbsp;</span></p>
<p id="t86" class="pln"><span class="str">                      Valid values are 'line', 'strict', 'exact', 'none'.</span><span class="strut">&nbsp;</span></p>
<p id="t87" class="pln"><span class="str">                      'line' - commands are matched line by line</span><span class="strut">&nbsp;</span></p>
<p id="t88" class="pln"><span class="str">                      'strict' - command lines are matched with respect to position</span><span class="strut">&nbsp;</span></p>
<p id="t89" class="pln"><span class="str">                      'exact' - command lines must be an equal match</span><span class="strut">&nbsp;</span></p>
<p id="t90" class="pln"><span class="str">                      'none' - will not compare the candidate configuration with the running configuration</span><span class="strut">&nbsp;</span></p>
<p id="t91" class="pln"><span class="str">        :param diff_ignore_lines: Use this argument to specify one or more lines that should be</span><span class="strut">&nbsp;</span></p>
<p id="t92" class="pln"><span class="str">                                  ignored during the diff.  This is used for lines in the configuration</span><span class="strut">&nbsp;</span></p>
<p id="t93" class="pln"><span class="str">                                  that are automatically updated by the system.  This argument takes</span><span class="strut">&nbsp;</span></p>
<p id="t94" class="pln"><span class="str">                                  a list of regular expressions or exact line matches.</span><span class="strut">&nbsp;</span></p>
<p id="t95" class="pln"><span class="str">        :param path: The ordered set of parents that uniquely identify the section or hierarchy</span><span class="strut">&nbsp;</span></p>
<p id="t96" class="pln"><span class="str">                     the commands should be checked against.  If the parents argument</span><span class="strut">&nbsp;</span></p>
<p id="t97" class="pln"><span class="str">                     is omitted, the commands are checked against the set of top</span><span class="strut">&nbsp;</span></p>
<p id="t98" class="pln"><span class="str">                    level or global commands.</span><span class="strut">&nbsp;</span></p>
<p id="t99" class="pln"><span class="str">        :param diff_replace: Instructs on the way to perform the configuration on the device.</span><span class="strut">&nbsp;</span></p>
<p id="t100" class="pln"><span class="str">                        If the replace argument is set to I(line) then the modified lines are</span><span class="strut">&nbsp;</span></p>
<p id="t101" class="pln"><span class="str">                        pushed to the device in configuration mode.  If the replace argument is</span><span class="strut">&nbsp;</span></p>
<p id="t102" class="pln"><span class="str">                        set to I(block) then the entire command block is pushed to the device in</span><span class="strut">&nbsp;</span></p>
<p id="t103" class="pln"><span class="str">                        configuration mode if any line is not correct.</span><span class="strut">&nbsp;</span></p>
<p id="t104" class="pln"><span class="str">        :return: Configuration diff in  json format.</span><span class="strut">&nbsp;</span></p>
<p id="t105" class="pln"><span class="str">               {</span><span class="strut">&nbsp;</span></p>
<p id="t106" class="pln"><span class="str">                   'config_diff': '',</span><span class="strut">&nbsp;</span></p>
<p id="t107" class="pln"><span class="str">                   'banner_diff': {}</span><span class="strut">&nbsp;</span></p>
<p id="t108" class="pln"><span class="str">               }</span><span class="strut">&nbsp;</span></p>
<p id="t109" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t110" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t111" class="stm run hide_run">        <span class="nam">diff</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t112" class="stm run hide_run">        <span class="nam">device_operations</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">get_device_operations</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t113" class="stm run hide_run">        <span class="nam">option_values</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">get_option_values</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t114" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t115" class="stm par run hide_run"><span class="annotate short">115&#x202F;&#x219B;&#x202F;116</span><span class="annotate long">line 115 didn't jump to line 116, because the condition on line 115 was never true</span>        <span class="key">if</span> <span class="nam">candidate</span> <span class="key">is</span> <span class="nam">None</span> <span class="key">and</span> <span class="nam">device_operations</span><span class="op">[</span><span class="str">'supports_generate_diff'</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t116" class="stm run hide_run">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">"candidate configuration is required to generate diff"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t117" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t118" class="stm run hide_run">        <span class="key">if</span> <span class="nam">diff_match</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">option_values</span><span class="op">[</span><span class="str">'diff_match'</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t119" class="stm run hide_run">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">"'match' value %s in invalid, valid values are %s"</span> <span class="op">%</span> <span class="op">(</span><span class="nam">diff_match</span><span class="op">,</span> <span class="str">', '</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">option_values</span><span class="op">[</span><span class="str">'diff_match'</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t120" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t121" class="stm par run hide_run"><span class="annotate short">121&#x202F;&#x219B;&#x202F;122</span><span class="annotate long">line 121 didn't jump to line 122, because the condition on line 121 was never true</span>        <span class="key">if</span> <span class="nam">diff_replace</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">option_values</span><span class="op">[</span><span class="str">'diff_replace'</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t122" class="stm run hide_run">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">"'replace' value %s in invalid, valid values are %s"</span> <span class="op">%</span> <span class="op">(</span><span class="nam">diff_replace</span><span class="op">,</span> <span class="str">', '</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">option_values</span><span class="op">[</span><span class="str">'diff_replace'</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t123" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t124" class="pln">        <span class="com"># prepare candidate configuration</span><span class="strut">&nbsp;</span></p>
<p id="t125" class="stm run hide_run">        <span class="nam">candidate_obj</span> <span class="op">=</span> <span class="nam">NetworkConfig</span><span class="op">(</span><span class="nam">indent</span><span class="op">=</span><span class="num">1</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t126" class="stm run hide_run">        <span class="nam">want_src</span><span class="op">,</span> <span class="nam">want_banners</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_extract_banners</span><span class="op">(</span><span class="nam">candidate</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t127" class="stm run hide_run">        <span class="nam">candidate_obj</span><span class="op">.</span><span class="nam">load</span><span class="op">(</span><span class="nam">want_src</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t128" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t129" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t130" class="stm run hide_run">        <span class="key">if</span> <span class="nam">running</span> <span class="key">and</span> <span class="nam">diff_match</span> <span class="op">!=</span> <span class="str">'none'</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t131" class="pln">            <span class="com"># running configuration</span><span class="strut">&nbsp;</span></p>
<p id="t132" class="stm run hide_run">            <span class="nam">have_src</span><span class="op">,</span> <span class="nam">have_banners</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_extract_banners</span><span class="op">(</span><span class="nam">running</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t133" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t134" class="stm run hide_run">            <span class="nam">running_obj</span> <span class="op">=</span> <span class="nam">NetworkConfig</span><span class="op">(</span><span class="nam">indent</span><span class="op">=</span><span class="num">1</span><span class="op">,</span> <span class="nam">contents</span><span class="op">=</span><span class="nam">have_src</span><span class="op">,</span> <span class="nam">ignore_lines</span><span class="op">=</span><span class="nam">diff_ignore_lines</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t135" class="stm run hide_run">            <span class="nam">configdiffobjs</span> <span class="op">=</span> <span class="nam">candidate_obj</span><span class="op">.</span><span class="nam">difference</span><span class="op">(</span><span class="nam">running_obj</span><span class="op">,</span> <span class="nam">path</span><span class="op">=</span><span class="nam">path</span><span class="op">,</span> <span class="nam">match</span><span class="op">=</span><span class="nam">diff_match</span><span class="op">,</span> <span class="nam">replace</span><span class="op">=</span><span class="nam">diff_replace</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t136" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t137" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t138" class="stm run hide_run">            <span class="nam">configdiffobjs</span> <span class="op">=</span> <span class="nam">candidate_obj</span><span class="op">.</span><span class="nam">items</span><span class="strut">&nbsp;</span></p>
<p id="t139" class="stm run hide_run">            <span class="nam">have_banners</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t140" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t141" class="stm run hide_run">        <span class="nam">diff</span><span class="op">[</span><span class="str">'config_diff'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">dumps</span><span class="op">(</span><span class="nam">configdiffobjs</span><span class="op">,</span> <span class="str">'commands'</span><span class="op">)</span> <span class="key">if</span> <span class="nam">configdiffobjs</span> <span class="key">else</span> <span class="str">''</span><span class="strut">&nbsp;</span></p>
<p id="t142" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t143" class="stm run hide_run">        <span class="nam">banners</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_diff_banners</span><span class="op">(</span><span class="nam">want_banners</span><span class="op">,</span> <span class="nam">have_banners</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t144" class="stm run hide_run">        <span class="nam">diff</span><span class="op">[</span><span class="str">'banner_diff'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">banners</span> <span class="key">if</span> <span class="nam">banners</span> <span class="key">else</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t145" class="stm run hide_run">        <span class="key">return</span> <span class="nam">diff</span><span class="strut">&nbsp;</span></p>
<p id="t146" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t147" class="stm run hide_run">    <span class="op">@</span><span class="nam">enable_mode</span><span class="strut">&nbsp;</span></p>
<p id="t148" class="stm run hide_run">    <span class="key">def</span> <span class="nam">edit_config</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">candidate</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">commit</span><span class="op">=</span><span class="nam">True</span><span class="op">,</span> <span class="nam">replace</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">comment</span><span class="op">=</span><span class="nam">None</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t149" class="stm run hide_run">        <span class="nam">resp</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t150" class="stm run hide_run">        <span class="nam">operations</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">get_device_operations</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t151" class="stm run hide_run">        <span class="nam">self</span><span class="op">.</span><span class="nam">check_edit_config_capability</span><span class="op">(</span><span class="nam">operations</span><span class="op">,</span> <span class="nam">candidate</span><span class="op">,</span> <span class="nam">commit</span><span class="op">,</span> <span class="nam">replace</span><span class="op">,</span> <span class="nam">comment</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t152" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t153" class="stm run hide_run">        <span class="nam">results</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t154" class="stm run hide_run">        <span class="nam">requests</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t155" class="stm par run hide_run"><span class="annotate short">155&#x202F;&#x219B;&#x202F;173</span><span class="annotate long">line 155 didn't jump to line 173, because the condition on line 155 was never false</span>        <span class="key">if</span> <span class="nam">commit</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t156" class="stm run hide_run">            <span class="nam">prompt</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_connection</span><span class="op">.</span><span class="nam">get_prompt</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t157" class="stm run hide_run">            <span class="key">if</span> <span class="op">(</span><span class="str">b'(config-if'</span> <span class="key">in</span> <span class="nam">prompt</span><span class="op">)</span> <span class="key">or</span> <span class="op">(</span><span class="str">b'(config'</span> <span class="key">in</span> <span class="nam">prompt</span><span class="op">)</span> <span class="key">or</span> <span class="op">(</span><span class="str">b'(config-lag-if'</span> <span class="key">in</span> <span class="nam">prompt</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t158" class="stm run hide_run">                <span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="str">'end'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t159" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t160" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="str">'configure terminal'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t161" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t162" class="stm run hide_run">            <span class="key">for</span> <span class="nam">line</span> <span class="key">in</span> <span class="nam">to_list</span><span class="op">(</span><span class="nam">candidate</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t163" class="stm par run hide_run"><span class="annotate short">163&#x202F;&#x219B;&#x202F;166</span><span class="annotate long">line 163 didn't jump to line 166, because the condition on line 163 was never false</span>                <span class="key">if</span> <span class="key">not</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">line</span><span class="op">,</span> <span class="nam">collections</span><span class="op">.</span><span class="nam">Mapping</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t164" class="stm run hide_run">                    <span class="nam">line</span> <span class="op">=</span> <span class="op">{</span><span class="str">'command'</span><span class="op">:</span> <span class="nam">line</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t165" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t166" class="stm run hide_run">                <span class="nam">cmd</span> <span class="op">=</span> <span class="nam">line</span><span class="op">[</span><span class="str">'command'</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t167" class="stm par run hide_run"><span class="annotate short">167&#x202F;&#x219B;&#x202F;162</span><span class="annotate long">line 167 didn't jump to line 162, because the condition on line 167 was never false</span>                <span class="key">if</span> <span class="nam">cmd</span> <span class="op">!=</span> <span class="str">'end'</span> <span class="key">and</span> <span class="nam">cmd</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">!=</span> <span class="str">'!'</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t168" class="stm run hide_run">                    <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="op">**</span><span class="nam">line</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t169" class="stm run hide_run">                    <span class="nam">requests</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">cmd</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t170" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t171" class="stm run hide_run">            <span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="str">'end'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t172" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t173" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">'check mode is not supported'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t174" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t175" class="stm run hide_run">        <span class="nam">resp</span><span class="op">[</span><span class="str">'request'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">requests</span><span class="strut">&nbsp;</span></p>
<p id="t176" class="stm run hide_run">        <span class="nam">resp</span><span class="op">[</span><span class="str">'response'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">results</span><span class="strut">&nbsp;</span></p>
<p id="t177" class="stm run hide_run">        <span class="key">return</span> <span class="nam">resp</span><span class="strut">&nbsp;</span></p>
<p id="t178" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t179" class="pln">    <span class="com"># @enable_mode</span><span class="strut">&nbsp;</span></p>
<p id="t180" class="pln">    <span class="com"># def edit_config(self, candidate=None, commit=True, replace=None, comment=None):</span><span class="strut">&nbsp;</span></p>
<p id="t181" class="pln">    <span class="com">#     resp = {}</span><span class="strut">&nbsp;</span></p>
<p id="t182" class="pln">    <span class="com">#     # operations = self.get_device_operations()</span><span class="strut">&nbsp;</span></p>
<p id="t183" class="pln">    <span class="com">#     # self.check_edit_config_capability(operations, candidate, commit, replace, comment)</span><span class="strut">&nbsp;</span></p>
<p id="t184" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t185" class="pln">    <span class="com">#     results = []</span><span class="strut">&nbsp;</span></p>
<p id="t186" class="pln">    <span class="com">#     requests = []</span><span class="strut">&nbsp;</span></p>
<p id="t187" class="pln">    <span class="com">#     if commit:</span><span class="strut">&nbsp;</span></p>
<p id="t188" class="pln">    <span class="com">#         self.send_command('configure terminal')</span><span class="strut">&nbsp;</span></p>
<p id="t189" class="pln">    <span class="com">#         for line in to_list(candidate):</span><span class="strut">&nbsp;</span></p>
<p id="t190" class="pln">    <span class="com">#             if not isinstance(line, collections.Mapping):</span><span class="strut">&nbsp;</span></p>
<p id="t191" class="pln">    <span class="com">#                 line = {'command': line}</span><span class="strut">&nbsp;</span></p>
<p id="t192" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t193" class="pln">    <span class="com">#             cmd = line['command']</span><span class="strut">&nbsp;</span></p>
<p id="t194" class="pln">    <span class="com">#             if cmd != 'end' and cmd[0] != '!':</span><span class="strut">&nbsp;</span></p>
<p id="t195" class="pln">    <span class="com">#                 results.append(self.send_command(**line))</span><span class="strut">&nbsp;</span></p>
<p id="t196" class="pln">    <span class="com">#                 requests.append(cmd)</span><span class="strut">&nbsp;</span></p>
<p id="t197" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t198" class="pln">    <span class="com">#         self.send_command('end')</span><span class="strut">&nbsp;</span></p>
<p id="t199" class="pln">    <span class="com">#     else:</span><span class="strut">&nbsp;</span></p>
<p id="t200" class="pln">    <span class="com">#         raise ValueError('check mode is not supported')</span><span class="strut">&nbsp;</span></p>
<p id="t201" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t202" class="pln">    <span class="com">#     resp['request'] = requests</span><span class="strut">&nbsp;</span></p>
<p id="t203" class="pln">    <span class="com">#     resp['response'] = results</span><span class="strut">&nbsp;</span></p>
<p id="t204" class="pln">    <span class="com">#     return resp</span><span class="strut">&nbsp;</span></p>
<p id="t205" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t206" class="pln">    <span class="com"># def edit_macro(self, candidate=None, commit=True, replace=None, comment=None):</span><span class="strut">&nbsp;</span></p>
<p id="t207" class="pln">    <span class="com">#     resp = {}</span><span class="strut">&nbsp;</span></p>
<p id="t208" class="pln">    <span class="com">#     operations = self.get_device_operations()</span><span class="strut">&nbsp;</span></p>
<p id="t209" class="pln">    <span class="com">#     self.check_edit_config_capabiltiy(operations, candidate, commit, replace, comment)</span><span class="strut">&nbsp;</span></p>
<p id="t210" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t211" class="pln">    <span class="com">#     results = []</span><span class="strut">&nbsp;</span></p>
<p id="t212" class="pln">    <span class="com">#     requests = []</span><span class="strut">&nbsp;</span></p>
<p id="t213" class="pln">    <span class="com">#     if commit:</span><span class="strut">&nbsp;</span></p>
<p id="t214" class="pln">    <span class="com">#         commands = ''</span><span class="strut">&nbsp;</span></p>
<p id="t215" class="pln">    <span class="com">#         for line in candidate:</span><span class="strut">&nbsp;</span></p>
<p id="t216" class="pln">    <span class="com">#             if line != 'None':</span><span class="strut">&nbsp;</span></p>
<p id="t217" class="pln">    <span class="com">#                 commands += (' ' + line + '\n')</span><span class="strut">&nbsp;</span></p>
<p id="t218" class="pln">    <span class="com">#             self.send_command('config terminal', sendonly=True)</span><span class="strut">&nbsp;</span></p>
<p id="t219" class="pln">    <span class="com">#             obj = {'command': commands, 'sendonly': True}</span><span class="strut">&nbsp;</span></p>
<p id="t220" class="pln">    <span class="com">#             results.append(self.send_command(**obj))</span><span class="strut">&nbsp;</span></p>
<p id="t221" class="pln">    <span class="com">#             requests.append(commands)</span><span class="strut">&nbsp;</span></p>
<p id="t222" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t223" class="pln">    <span class="com">#         self.send_command('end', sendonly=True)</span><span class="strut">&nbsp;</span></p>
<p id="t224" class="pln">    <span class="com">#         time.sleep(0.1)</span><span class="strut">&nbsp;</span></p>
<p id="t225" class="pln">    <span class="com">#         results.append(self.send_command('\n'))</span><span class="strut">&nbsp;</span></p>
<p id="t226" class="pln">    <span class="com">#         requests.append('\n')</span><span class="strut">&nbsp;</span></p>
<p id="t227" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t228" class="pln">    <span class="com">#     resp['request'] = requests</span><span class="strut">&nbsp;</span></p>
<p id="t229" class="pln">    <span class="com">#     resp['response'] = results</span><span class="strut">&nbsp;</span></p>
<p id="t230" class="pln">    <span class="com">#     return resp</span><span class="strut">&nbsp;</span></p>
<p id="t231" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t232" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">command</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">prompt</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">answer</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">sendonly</span><span class="op">=</span><span class="nam">False</span><span class="op">,</span> <span class="nam">output</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">check_all</span><span class="op">=</span><span class="nam">False</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t233" class="stm mis">        <span class="key">if</span> <span class="key">not</span> <span class="nam">command</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t234" class="stm run hide_run">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">'must provide value of command to execute'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t235" class="stm par run hide_run"><span class="annotate short">235&#x202F;&#x219B;&#x202F;236</span><span class="annotate long">line 235 didn't jump to line 236, because the condition on line 235 was never true</span>        <span class="key">if</span> <span class="nam">output</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t236" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">"'output' value %s is not supported for get"</span> <span class="op">%</span> <span class="nam">output</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t237" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t238" class="stm run hide_run">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="nam">command</span><span class="op">=</span><span class="nam">command</span><span class="op">,</span> <span class="nam">prompt</span><span class="op">=</span><span class="nam">prompt</span><span class="op">,</span> <span class="nam">answer</span><span class="op">=</span><span class="nam">answer</span><span class="op">,</span> <span class="nam">sendonly</span><span class="op">=</span><span class="nam">sendonly</span><span class="op">,</span> <span class="nam">check_all</span><span class="op">=</span><span class="nam">check_all</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t239" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t240" class="stm run hide_run">    <span class="key">def</span> <span class="nam">scp</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">command</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span><span class="nam">scp_user</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span><span class="nam">scp_pass</span><span class="op">=</span><span class="nam">None</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t241" class="stm par run hide_run"><span class="annotate short">241&#x202F;&#x219B;&#x202F;242,&nbsp;&nbsp; 241&#x202F;&#x219B;&#x202F;243</span><span class="annotate long">2 missed branches: 1) line 241 didn't jump to line 242, because the condition on line 241 was never true, 2) line 241 didn't jump to line 243, because the condition on line 241 was never false</span>        <span class="key">if</span> <span class="key">not</span> <span class="nam">command</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t242" class="stm run hide_run">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">'must provide value of command to execute'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t243" class="stm mis">        <span class="nam">prompt</span> <span class="op">=</span> <span class="op">[</span><span class="str">"User name:"</span><span class="op">,</span><span class="str">"Password:"</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t244" class="stm mis">        <span class="key">if</span><span class="op">(</span><span class="nam">scp_pass</span> <span class="op">==</span> <span class="nam">None</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t245" class="stm mis">            <span class="nam">answer</span> <span class="op">=</span> <span class="op">[</span><span class="nam">scp_user</span><span class="op">,</span><span class="nam">self</span><span class="op">.</span><span class="nam">_connection</span><span class="op">.</span><span class="nam">_play_context</span><span class="op">.</span><span class="nam">password</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t246" class="pln">        <span class="key">else</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t247" class="stm mis">            <span class="nam">answer</span> <span class="op">=</span> <span class="op">[</span><span class="nam">scp_user</span><span class="op">,</span><span class="nam">scp_pass</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t248" class="stm mis">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="nam">command</span><span class="op">=</span><span class="nam">command</span><span class="op">,</span> <span class="nam">prompt</span><span class="op">=</span><span class="nam">prompt</span><span class="op">,</span> <span class="nam">answer</span><span class="op">=</span><span class="nam">answer</span><span class="op">,</span> <span class="nam">sendonly</span><span class="op">=</span><span class="nam">False</span><span class="op">,</span> <span class="nam">check_all</span><span class="op">=</span><span class="nam">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t249" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t250" class="pln">    <span class="com"># def get_device_info(self):</span><span class="strut">&nbsp;</span></p>
<p id="t251" class="pln">    <span class="com">#     device_info = {}</span><span class="strut">&nbsp;</span></p>
<p id="t252" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t253" class="pln">    <span class="com">#     device_info['network_os'] = 'ios'</span><span class="strut">&nbsp;</span></p>
<p id="t254" class="pln">    <span class="com">#     reply = self.get(command='show version')</span><span class="strut">&nbsp;</span></p>
<p id="t255" class="pln">    <span class="com">#     data = to_text(reply, errors='surrogate_or_strict').strip()</span><span class="strut">&nbsp;</span></p>
<p id="t256" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t257" class="pln">    <span class="com">#     match = re.search(r'Version (\S+)', data)</span><span class="strut">&nbsp;</span></p>
<p id="t258" class="pln">    <span class="com">#     if match:</span><span class="strut">&nbsp;</span></p>
<p id="t259" class="pln">    <span class="com">#         device_info['network_os_version'] = match.group(1).strip(',')</span><span class="strut">&nbsp;</span></p>
<p id="t260" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t261" class="pln">    <span class="com">#     match = re.search(r'^Cisco (.+) \(revision', data, re.M)</span><span class="strut">&nbsp;</span></p>
<p id="t262" class="pln">    <span class="com">#     if match:</span><span class="strut">&nbsp;</span></p>
<p id="t263" class="pln">    <span class="com">#         device_info['network_os_model'] = match.group(1)</span><span class="strut">&nbsp;</span></p>
<p id="t264" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t265" class="pln">    <span class="com">#     match = re.search(r'^(.+) uptime', data, re.M)</span><span class="strut">&nbsp;</span></p>
<p id="t266" class="pln">    <span class="com">#     if match:</span><span class="strut">&nbsp;</span></p>
<p id="t267" class="pln">    <span class="com">#         device_info['network_os_hostname'] = match.group(1)</span><span class="strut">&nbsp;</span></p>
<p id="t268" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t269" class="pln">    <span class="com">#     return device_info</span><span class="strut">&nbsp;</span></p>
<p id="t270" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t271" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get_device_operations</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t272" class="stm run hide_run">        <span class="key">return</span> <span class="op">{</span><span class="strut">&nbsp;</span></p>
<p id="t273" class="pln">            <span class="str">'supports_diff_replace'</span><span class="op">:</span> <span class="nam">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t274" class="pln">            <span class="str">'supports_commit'</span><span class="op">:</span> <span class="nam">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t275" class="pln">            <span class="str">'supports_rollback'</span><span class="op">:</span> <span class="nam">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t276" class="pln">            <span class="str">'supports_defaults'</span><span class="op">:</span> <span class="nam">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t277" class="pln">            <span class="str">'supports_onbox_diff'</span><span class="op">:</span> <span class="nam">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t278" class="pln">            <span class="str">'supports_commit_comment'</span><span class="op">:</span> <span class="nam">False</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t279" class="pln">            <span class="str">'supports_multiline_delimiter'</span><span class="op">:</span> <span class="nam">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t280" class="pln">            <span class="str">'supports_diff_match'</span><span class="op">:</span> <span class="nam">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t281" class="pln">            <span class="str">'supports_diff_ignore_lines'</span><span class="op">:</span> <span class="nam">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t282" class="pln">            <span class="str">'supports_generate_diff'</span><span class="op">:</span> <span class="nam">True</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t283" class="pln">            <span class="str">'supports_replace'</span><span class="op">:</span> <span class="nam">False</span><span class="strut">&nbsp;</span></p>
<p id="t284" class="pln">        <span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t285" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t286" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get_option_values</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t287" class="stm run hide_run">        <span class="key">return</span> <span class="op">{</span><span class="strut">&nbsp;</span></p>
<p id="t288" class="pln">            <span class="str">'format'</span><span class="op">:</span> <span class="op">[</span><span class="str">'text'</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t289" class="pln">            <span class="str">'diff_match'</span><span class="op">:</span> <span class="op">[</span><span class="str">'line'</span><span class="op">,</span> <span class="str">'strict'</span><span class="op">,</span> <span class="str">'exact'</span><span class="op">,</span> <span class="str">'none'</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t290" class="pln">            <span class="str">'diff_replace'</span><span class="op">:</span> <span class="op">[</span><span class="str">'line'</span><span class="op">,</span> <span class="str">'block'</span><span class="op">]</span><span class="op">,</span><span class="strut">&nbsp;</span></p>
<p id="t291" class="pln">            <span class="str">'output'</span><span class="op">:</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t292" class="pln">        <span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t293" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t294" class="stm run hide_run">    <span class="key">def</span> <span class="nam">get_capabilities</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t295" class="stm run hide_run">        <span class="nam">result</span> <span class="op">=</span> <span class="nam">dict</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t296" class="stm mis">        <span class="nam">result</span><span class="op">[</span><span class="str">'rpc'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">get_base_rpc</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="op">[</span><span class="str">'edit_banner'</span><span class="op">,</span> <span class="str">'get_diff'</span><span class="op">,</span> <span class="str">'run_commands'</span><span class="op">,</span> <span class="str">'get_defaults_flag'</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t297" class="stm mis">        <span class="nam">result</span><span class="op">[</span><span class="str">'network_api'</span><span class="op">]</span> <span class="op">=</span> <span class="str">'cliconf'</span><span class="strut">&nbsp;</span></p>
<p id="t298" class="pln">        <span class="com"># result['device_info'] = self.get_device_info()</span><span class="strut">&nbsp;</span></p>
<p id="t299" class="stm mis">        <span class="nam">result</span><span class="op">[</span><span class="str">'device_operations'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">get_device_operations</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t300" class="stm mis">        <span class="nam">result</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">get_option_values</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t301" class="stm mis">        <span class="key">return</span> <span class="nam">json</span><span class="op">.</span><span class="nam">dumps</span><span class="op">(</span><span class="nam">result</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t302" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t303" class="stm run hide_run">    <span class="key">def</span> <span class="nam">edit_banner</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">candidate</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">multiline_delimiter</span><span class="op">=</span><span class="str">"@"</span><span class="op">,</span> <span class="nam">commit</span><span class="op">=</span><span class="nam">True</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t304" class="pln">        <span class="str">"""</span><span class="strut">&nbsp;</span></p>
<p id="t305" class="pln"><span class="str">        Edit banner on remote device</span><span class="strut">&nbsp;</span></p>
<p id="t306" class="pln"><span class="str">        :param banners: Banners to be loaded in json format</span><span class="strut">&nbsp;</span></p>
<p id="t307" class="pln"><span class="str">        :param multiline_delimiter: Line delimiter for banner</span><span class="strut">&nbsp;</span></p>
<p id="t308" class="pln"><span class="str">        :param commit: Boolean value that indicates if the device candidate</span><span class="strut">&nbsp;</span></p>
<p id="t309" class="pln"><span class="str">               configuration should be  pushed in the running configuration or discarded.</span><span class="strut">&nbsp;</span></p>
<p id="t310" class="pln"><span class="str">        :param diff: Boolean flag to indicate if configuration that is applied on remote host should</span><span class="strut">&nbsp;</span></p>
<p id="t311" class="pln"><span class="str">                     generated and returned in response or not</span><span class="strut">&nbsp;</span></p>
<p id="t312" class="pln"><span class="str">        :return: Returns response of executing the configuration command received</span><span class="strut">&nbsp;</span></p>
<p id="t313" class="pln"><span class="str">             from remote host</span><span class="strut">&nbsp;</span></p>
<p id="t314" class="pln"><span class="str">        """</span><span class="strut">&nbsp;</span></p>
<p id="t315" class="stm mis">        <span class="nam">resp</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t316" class="stm mis">        <span class="nam">banners_obj</span> <span class="op">=</span> <span class="nam">json</span><span class="op">.</span><span class="nam">loads</span><span class="op">(</span><span class="nam">candidate</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t317" class="stm mis">        <span class="nam">results</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t318" class="stm mis">        <span class="nam">requests</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span><span class="strut">&nbsp;</span></p>
<p id="t319" class="stm mis">        <span class="key">if</span> <span class="nam">commit</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t320" class="stm mis">            <span class="key">for</span> <span class="nam">key</span><span class="op">,</span> <span class="nam">value</span> <span class="key">in</span> <span class="nam">iteritems</span><span class="op">(</span><span class="nam">banners_obj</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t321" class="stm mis">                <span class="nam">key</span> <span class="op">+=</span> <span class="str">' %s'</span> <span class="op">%</span> <span class="nam">multiline_delimiter</span><span class="strut">&nbsp;</span></p>
<p id="t322" class="stm mis">                <span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="str">'config terminal'</span><span class="op">,</span> <span class="nam">sendonly</span><span class="op">=</span><span class="nam">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t323" class="stm mis">                <span class="key">for</span> <span class="nam">cmd</span> <span class="key">in</span> <span class="op">[</span><span class="nam">key</span><span class="op">,</span> <span class="nam">value</span><span class="op">,</span> <span class="nam">multiline_delimiter</span><span class="op">]</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t324" class="stm mis">                    <span class="nam">obj</span> <span class="op">=</span> <span class="op">{</span><span class="str">'command'</span><span class="op">:</span> <span class="nam">cmd</span><span class="op">,</span> <span class="str">'sendonly'</span><span class="op">:</span> <span class="nam">True</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t325" class="stm mis">                    <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="op">**</span><span class="nam">obj</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t326" class="stm mis">                    <span class="nam">requests</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">cmd</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t327" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t328" class="stm mis">                <span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="str">'end'</span><span class="op">,</span> <span class="nam">sendonly</span><span class="op">=</span><span class="nam">True</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t329" class="stm run hide_run">                <span class="nam">time</span><span class="op">.</span><span class="nam">sleep</span><span class="op">(</span><span class="num">0.1</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t330" class="stm run hide_run">                <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="str">'\n'</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t331" class="stm mis">                <span class="nam">requests</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">'\n'</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t332" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t333" class="stm run hide_run">        <span class="nam">resp</span><span class="op">[</span><span class="str">'request'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">requests</span><span class="strut">&nbsp;</span></p>
<p id="t334" class="stm run hide_run">        <span class="nam">resp</span><span class="op">[</span><span class="str">'response'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">results</span><span class="strut">&nbsp;</span></p>
<p id="t335" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t336" class="stm run hide_run">        <span class="key">return</span> <span class="nam">resp</span><span class="strut">&nbsp;</span></p>
<p id="t337" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t338" class="stm run hide_run">    <span class="key">def</span> <span class="nam">run_commands</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">commands</span><span class="op">=</span><span class="nam">None</span><span class="op">,</span> <span class="nam">check_rc</span><span class="op">=</span><span class="nam">True</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t339" class="stm par run hide_run"><span class="annotate short">339&#x202F;&#x219B;&#x202F;340</span><span class="annotate long">line 339 didn't jump to line 340, because the condition on line 339 was never true</span>        <span class="key">if</span> <span class="nam">commands</span> <span class="key">is</span> <span class="nam">None</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t340" class="stm mis">            <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">"'commands' value is required"</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t341" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t342" class="stm run hide_run">        <span class="nam">responses</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t343" class="stm run hide_run">        <span class="key">for</span> <span class="nam">cmd</span> <span class="key">in</span> <span class="nam">to_list</span><span class="op">(</span><span class="nam">commands</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t344" class="stm par run hide_run"><span class="annotate short">344&#x202F;&#x219B;&#x202F;347</span><span class="annotate long">line 344 didn't jump to line 347, because the condition on line 344 was never false</span>            <span class="key">if</span> <span class="key">not</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">cmd</span><span class="op">,</span> <span class="nam">collections</span><span class="op">.</span><span class="nam">Mapping</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t345" class="stm run hide_run">                <span class="nam">cmd</span> <span class="op">=</span> <span class="op">{</span><span class="str">'command'</span><span class="op">:</span> <span class="nam">cmd</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t346" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t347" class="stm run hide_run">            <span class="nam">output</span> <span class="op">=</span> <span class="nam">cmd</span><span class="op">.</span><span class="nam">pop</span><span class="op">(</span><span class="str">'output'</span><span class="op">,</span> <span class="nam">None</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t348" class="stm par run hide_run"><span class="annotate short">348&#x202F;&#x219B;&#x202F;349</span><span class="annotate long">line 348 didn't jump to line 349, because the condition on line 348 was never true</span>            <span class="key">if</span> <span class="nam">output</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t349" class="stm run hide_run">                <span class="key">raise</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">"'output' value %s is not supported for run_commands"</span> <span class="op">%</span> <span class="nam">output</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t350" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t351" class="stm run hide_run">            <span class="key">try</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t352" class="stm run hide_run">                <span class="nam">out</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">send_command</span><span class="op">(</span><span class="op">**</span><span class="nam">cmd</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t353" class="stm run hide_run">            <span class="key">except</span> <span class="nam">AnsibleConnectionFailure</span> <span class="key">as</span> <span class="nam">e</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t354" class="stm par run hide_run"><span class="annotate short">354&#x202F;&#x219B;&#x202F;355,&nbsp;&nbsp; 354&#x202F;&#x219B;&#x202F;356</span><span class="annotate long">2 missed branches: 1) line 354 didn't jump to line 355, because the condition on line 354 was never true, 2) line 354 didn't jump to line 356, because the condition on line 354 was never false</span>                <span class="key">if</span> <span class="nam">check_rc</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t355" class="stm mis">                    <span class="key">raise</span><span class="strut">&nbsp;</span></p>
<p id="t356" class="stm mis">                <span class="nam">out</span> <span class="op">=</span> <span class="nam">getattr</span><span class="op">(</span><span class="nam">e</span><span class="op">,</span> <span class="str">'err'</span><span class="op">,</span> <span class="nam">to_text</span><span class="op">(</span><span class="nam">e</span><span class="op">)</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t357" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t358" class="stm run hide_run">            <span class="nam">responses</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">out</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t359" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t360" class="stm run hide_run">        <span class="key">return</span> <span class="nam">responses</span><span class="strut">&nbsp;</span></p>
<p id="t361" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t362" class="pln">    <span class="com"># def get_defaults_flag(self):</span><span class="strut">&nbsp;</span></p>
<p id="t363" class="pln">    <span class="com">#     """</span><span class="strut">&nbsp;</span></p>
<p id="t364" class="pln">    <span class="com">#     The method identifies the filter that should be used to fetch running-configuration</span><span class="strut">&nbsp;</span></p>
<p id="t365" class="pln">    <span class="com">#     with defaults.</span><span class="strut">&nbsp;</span></p>
<p id="t366" class="pln">    <span class="com">#     :return: valid default filter</span><span class="strut">&nbsp;</span></p>
<p id="t367" class="pln">    <span class="com">#     """</span><span class="strut">&nbsp;</span></p>
<p id="t368" class="pln">    <span class="com">#     out = self.get('show running-config ?')</span><span class="strut">&nbsp;</span></p>
<p id="t369" class="pln">    <span class="com">#     out = to_text(out, errors='surrogate_then_replace')</span><span class="strut">&nbsp;</span></p>
<p id="t370" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t371" class="pln">    <span class="com">#     commands = set()</span><span class="strut">&nbsp;</span></p>
<p id="t372" class="pln">    <span class="com">#     for line in out.splitlines():</span><span class="strut">&nbsp;</span></p>
<p id="t373" class="pln">    <span class="com">#         if line.strip():</span><span class="strut">&nbsp;</span></p>
<p id="t374" class="pln">    <span class="com">#             commands.add(line.strip().split()[0])</span><span class="strut">&nbsp;</span></p>
<p id="t375" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t376" class="pln">    <span class="com">#     if 'all' in commands:</span><span class="strut">&nbsp;</span></p>
<p id="t377" class="pln">    <span class="com">#         return 'all'</span><span class="strut">&nbsp;</span></p>
<p id="t378" class="pln">    <span class="com">#     else:</span><span class="strut">&nbsp;</span></p>
<p id="t379" class="pln">    <span class="com">#         return 'full'</span><span class="strut">&nbsp;</span></p>
<p id="t380" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t381" class="stm run hide_run">    <span class="key">def</span> <span class="nam">_extract_banners</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">config</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t382" class="stm run hide_run">        <span class="nam">banners</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t383" class="stm run hide_run">        <span class="nam">banner_cmds</span> <span class="op">=</span> <span class="nam">re</span><span class="op">.</span><span class="nam">findall</span><span class="op">(</span><span class="str">r'^banner (\w+)'</span><span class="op">,</span> <span class="nam">config</span><span class="op">,</span> <span class="nam">re</span><span class="op">.</span><span class="nam">M</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t384" class="stm run hide_run">        <span class="key">for</span> <span class="nam">cmd</span> <span class="key">in</span> <span class="nam">banner_cmds</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t385" class="stm run hide_run">            <span class="nam">regex</span> <span class="op">=</span> <span class="str">r'banner %s \$(.+?)(?=\$)'</span> <span class="op">%</span> <span class="nam">cmd</span><span class="strut">&nbsp;</span></p>
<p id="t386" class="stm run hide_run">            <span class="nam">match</span> <span class="op">=</span> <span class="nam">re</span><span class="op">.</span><span class="nam">search</span><span class="op">(</span><span class="nam">regex</span><span class="op">,</span> <span class="nam">config</span><span class="op">,</span> <span class="nam">re</span><span class="op">.</span><span class="nam">S</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t387" class="stm par run hide_run"><span class="annotate short">387&#x202F;&#x219B;&#x202F;388</span><span class="annotate long">line 387 didn't jump to line 388, because the condition on line 387 was never true</span>            <span class="key">if</span> <span class="nam">match</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t388" class="stm run hide_run">                <span class="nam">key</span> <span class="op">=</span> <span class="str">'banner %s'</span> <span class="op">%</span> <span class="nam">cmd</span><span class="strut">&nbsp;</span></p>
<p id="t389" class="stm run hide_run">                <span class="nam">banners</span><span class="op">[</span><span class="nam">key</span><span class="op">]</span> <span class="op">=</span> <span class="nam">match</span><span class="op">.</span><span class="nam">group</span><span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">.</span><span class="nam">strip</span><span class="op">(</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t390" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t391" class="stm run hide_run">        <span class="key">for</span> <span class="nam">cmd</span> <span class="key">in</span> <span class="nam">banner_cmds</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t392" class="stm run hide_run">            <span class="nam">regex</span> <span class="op">=</span> <span class="str">r'banner %s \$(.+?)(?=\$)'</span> <span class="op">%</span> <span class="nam">cmd</span><span class="strut">&nbsp;</span></p>
<p id="t393" class="stm run hide_run">            <span class="nam">match</span> <span class="op">=</span> <span class="nam">re</span><span class="op">.</span><span class="nam">search</span><span class="op">(</span><span class="nam">regex</span><span class="op">,</span> <span class="nam">config</span><span class="op">,</span> <span class="nam">re</span><span class="op">.</span><span class="nam">S</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t394" class="stm par run hide_run"><span class="annotate short">394&#x202F;&#x219B;&#x202F;395</span><span class="annotate long">line 394 didn't jump to line 395, because the condition on line 394 was never true</span>            <span class="key">if</span> <span class="nam">match</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t395" class="stm mis">                <span class="nam">config</span> <span class="op">=</span> <span class="nam">config</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="nam">str</span><span class="op">(</span><span class="nam">match</span><span class="op">.</span><span class="nam">group</span><span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">)</span><span class="op">,</span> <span class="str">''</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t396" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t397" class="stm run hide_run">        <span class="nam">config</span> <span class="op">=</span> <span class="nam">re</span><span class="op">.</span><span class="nam">sub</span><span class="op">(</span><span class="str">r'banner \w+ \$\$'</span><span class="op">,</span> <span class="str">'!! banner removed'</span><span class="op">,</span> <span class="nam">config</span><span class="op">)</span><span class="strut">&nbsp;</span></p>
<p id="t398" class="stm run hide_run">        <span class="key">return</span> <span class="nam">config</span><span class="op">,</span> <span class="nam">banners</span><span class="strut">&nbsp;</span></p>
<p id="t399" class="pln"><span class="strut">&nbsp;</span></p>
<p id="t400" class="stm run hide_run">    <span class="key">def</span> <span class="nam">_diff_banners</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">want</span><span class="op">,</span> <span class="nam">have</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t401" class="stm run hide_run">        <span class="nam">candidate</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span><span class="strut">&nbsp;</span></p>
<p id="t402" class="stm par run hide_run"><span class="annotate short">402&#x202F;&#x219B;&#x202F;403</span><span class="annotate long">line 402 didn't jump to line 403, because the loop on line 402 never started</span>        <span class="key">for</span> <span class="nam">key</span><span class="op">,</span> <span class="nam">value</span> <span class="key">in</span> <span class="nam">iteritems</span><span class="op">(</span><span class="nam">want</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t403" class="stm mis">            <span class="key">if</span> <span class="nam">value</span> <span class="op">!=</span> <span class="nam">have</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="nam">key</span><span class="op">)</span><span class="op">:</span><span class="strut">&nbsp;</span></p>
<p id="t404" class="stm mis">                <span class="nam">candidate</span><span class="op">[</span><span class="nam">key</span><span class="op">]</span> <span class="op">=</span> <span class="nam">value</span><span class="strut">&nbsp;</span></p>
<p id="t405" class="stm run hide_run">        <span class="key">return</span> <span class="nam">candidate</span><span class="strut">&nbsp;</span></p>

            </td>
        </tr>
    </table>
</div>

<div id="footer">
    <div class="content">
        <p>
            <a class="nav" href="index.html">&#xab; index</a> &nbsp; &nbsp; <a class="nav" href="https://coverage.readthedocs.io">coverage.py v4.5.2</a>,
            created at 2019-05-29 12:41
        </p>
    </div>
</div>

</body>
</html>
